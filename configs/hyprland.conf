### NVIDIA ###
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
# can cause firefox crashes
#env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = WLR_NO_HARDWARE_CURSORS,1
### MONITORS ###

# See available monitors with 'hyprctl monitors'
monitor = DP-1,2560x1440@99.945999,0x0,1 # (NAME,RES@HZ,OFFSET,SCALE)
monitor = HDMI-A-1,disable
#monitor=,preferred,auto,auto
wsbind = 1,DP-1
wsbind = 2,DP-1
wsbind = 3,DP-1
wsbind = 4,DP-1
wsbind = 5,DP-1
wsbind = 6,DP-1
wsbind = 7,DP-1
wsbind = 8,DP-1
wsbind = 9,DP-1

#exec-once = hyprctl output create headless
#monitor = HEADLESS-1,2560x1440@60,0x0,1
#wsbind = 10,HEADLESS-1
#workspace = HEADLESS-1,10

### CONFIGURATION ###

general {
	border_size = 0
	no_border_on_floating = true
	gaps_in = 5
	gaps_out = 05
	#col.inactive_border = rgba(595959aa)
	#col.active_border = rgba(999999aa)
	layout = dwindle
}

decoration {
	rounding = 8
    multisample_edges = true
      active_opacity = 1.0
  inactive_opacity = 1.0
    blur = true
  blur_size = 3
  blur_passes = 3
  blur_new_optimizations = true
	drop_shadow = false
  drop_shadow = true
  shadow_ignore_window = true
  shadow_offset = 2 2
  shadow_range = 4
  shadow_render_power = 2
  col.shadow = 0x66000000

  blurls = gtk-layer-shell
  #blurls = waybar
  #blurls = lockscreen
}

animations {
	enabled = yes
  bezier = overshot, 0.05, 0.9, 0.1, 1.05
  bezier = smoothOut, 0.36, 0, 0.66, -0.56
  bezier = smoothIn, 0.25, 1, 0.5, 1
  animation = windows, 1, 5, overshot, slide
  animation = windowsOut, 1, 4, smoothOut, slide
  animation = windowsMove, 1, 4, default
  animation = border, 1, 10, default
  animation = fade, 1, 10, smoothIn
  animation = fadeDim, 1, 10, smoothIn
  animation = workspaces, 1, 6, default
}

input {
	kb_layout = us
	kb_options = 
	follow_mouse = 1
	force_no_accel = true
    touchpad {
        natural_scroll = no
    }

    sensitivity = 0.2 # -1.0 - 1.0, 0 means no modification.
}

misc {
	disable_hyprland_logo = true
	disable_splash_rendering = true
  mouse_move_enables_dpms = true
  enable_swallow = true
  swallow_regex = ^(kitty)$
	vrr = 2
}

dwindle {
  no_gaps_when_only = false
	pseudotile = yes
	preserve_split = yes
}

master {
	new_is_master = true
}

### KEYBINDINGS ###

# Set mod key to Super
$mainMod = SUPER

#Desktop usage
bind = $mainMod, D, exec, rofi -show drun
bind = $mainMod, Return, exec, kitty
bind = $mainMod, V, exec, clipman pick -t rofi
bind = , Print, exec, grim -o $(hyprctl -j monitors | jq -r '.[] | select(.focused) | .name') - | wl-copy
bind = SHIFT, Print, exec, grim -o $(hyprctl -j monitors | jq -r '.[] | select(.focused) | .name') - | swappy -f -
bind = $mainMod, Print, exec, grim -g "$(slurp)" - | wl-copy
bind = $mainMod SHIFT, Print, exec, grim -g "$(slurp)" - | swappy -f -
bind = $mainMod SHIFT, X, exec, hyprpicker -a -n
bind = CTRL ALT, L, exec, swaylock
#bind = $mainMod, L, exec, wlogout

# Window control
bind = $mainMod SHIFT, Q, killactive
bind = $mainMod, B, togglefloating,
bind = $mainMod, P, pseudo
#bind = $mainMod, J, togglesplit
bind = $mainMod, F, fullscreen, 0
bind = $mainMod, M, fullscreen, 1

# Move focus with mod key + hjkl
bind = $mainMod, L, movefocus, l
bind = $mainMod, H, movefocus, r
bind = $mainMod, J, movefocus, u
bind = $mainMod, K, movefocus, d

# Move window with SHIFT + MOD + hjkl
bind = $mainMod SHIFT, L, movewindow, l
bind = $mainMod SHIFT, H, movewindow, r
bind = $mainMod SHIFT, J, movewindow, d
bind = $mainMod SHIFT, K, movewindow, u

# Resize active window with ALT + MOD + hjkl
bind = $mainMod ALT, L, resizeactive, 20 0
bind = $mainMod ALT, H, resizeactive, -20 0
bind = $mainMod ALT, J, resizeactive, 0 -20
bind = $mainMod ALT, K, resizeactive, 0 20

# Resize active window a lot with SHIFT+ALT + MOD + hjkl
bind = $mainMod ALT SHIFT, L, resizeactive, 200 0
bind = $mainMod ALT SHIFT, H, resizeactive, -200 0
bind = $mainMod ALT SHIFT, J, resizeactive, 0 -200
bind = $mainMod ALT SHIFT, K, resizeactive, 0 200

# Switch workspaces with mod key + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mod key + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, movetoworkspacesilent, 10

# Scroll through existing workspaces with mod key + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mod key + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

### APPS ###

# Move apps to workspaces
windowrulev2 = workspace 1 silent,class:^(firefox)$
windowrulev2 = workspace 2 silent,class:^(codium-url-handler)$
windowrulev2 = workspace 3 silent,class:^(Signal)$
windowrulev2 = workspace 3 silent,title:^(WebCord)$
windowrulev2 = workspace 4 silent,class:^(Steam)$
windowrulev2 = workspace 4 silent,title:(.*Steam.*)
windowrulev2 = workspace 4 silent,class:(steam_app_.*)$
windowrulev2 = workspace 5 silent,class:^(org.gnome.Nautilus)$
windowrulev2 = workspace 6 silent,class:^(startup-monitor)$ # btop
windowrulev2 = workspace 6 silent,class:^(corectrl)$
#windowrulev2 = workspace 7 silent,class:^(startup-kitty)$ # Terminal

# Tile apps
windowrulev2 = tile,class:^(Godot.*)$
windowrulev2 = tile,class:^(Steam)$,title:(.*Steam.*)
windowrulev2 = tile,class:^(steam_app_.*)$
windowrulev2 = tile,class:^(photoshop.exe)$

# Hide apps
windowrulev2 = float,title:^(Firefox — Sharing Indicator)$
windowrulev2 = size 0 0,title:^(Firefox — Sharing Indicator)$
windowrulev2 = float,title:^(Wine System Tray)$
windowrulev2 = size 0 0,title:^(Wine System Tray)$

# Basic functionalities
exec-once = sleep 2 && waybar & sleep 2 && hyprctl reload & /etc/polkit-gnome
# Tray applications
#exec-once = kdeconnect-indicator & clipman clear --all & wl-paste -t text --watch clipman store & nm-applet --indicator
# Standard applications
#exec-once = firefox & codium & signal-desktop & nautilus -w & webcord & steam
# Terminals/Task managers
exec-once = kitty #--class startup-monitor --session ~/.config/kitty/kitty-task-managers.session & corectrl & kitty --class startup-kitty --session ~/.config/kitty/kitty.session
exec-once = ~/.config/hypr/xdg-portal-hyprland
